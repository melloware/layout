(function(b){if(!b.layout){return}b.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(d){var j=document.cookie,f=j?j.split(";"):[],g;for(var e=0,h=f.length;e<h;e++){g=b.trim(f[e]).split("=");if(g[0]==d){return decodeURIComponent(g[1])}}return""},write:function(f,i,d){var h="",e="",c=false,g=d||{};if(!g.expires){}else{if(g.expires.toUTCString){e=g.expires}else{if(typeof g.expires=="number"){e=new Date();if(g.expires>0){e.setDate(e.getDate()+g.expires)}else{e.setYear(1970);c=true}}}}if(e){h+=";expires="+e.toUTCString()}if(g.path){h+=";path="+g.path}if(g.domain){h+=";domain="+g.domain}if(g.secure){h+=";secure"}document.cookie=f+"="+(c?"":encodeURIComponent(i))+h},clear:function(c){b.ui.cookie.write(c,"",{expires:-1})}};b.layout.plugins.stateManagement=true;b.layout.defaults.stateManagement={enabled:false,autoSave:true,autoLoad:true,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:false}};b.layout.optionsMap.layout.push("stateManagement");b.layout.state={config:{allPanes:"north,south,west,east,center"},saveCookie:function(h,f,d){var i=h.options,e=i.stateManagement,c=b.extend({},e.cookie,d||{}),g=h.state.stateData=h.readState(f||e.stateKeys);b.ui.cookie.write(c.name||i.name||"Layout",b.layout.state.encodeJSON(g),c);return b.extend({},g)},deleteCookie:function(c){var d=c.options;b.ui.cookie.clear(d.stateManagement.cookie.name||d.name||"Layout")},readCookie:function(d){var e=d.options;var f=b.ui.cookie.read(e.stateManagement.cookie.name||e.name||"Layout");return f?b.layout.state.decodeJSON(f):{}},loadCookie:function(d){var e=b.layout.state.readCookie(d);if(e){d.state.stateData=b.extend({},e);d.loadState(e)}return e},loadState:function(j,g,d){g=b.layout.transformData(g);b.extend(true,j.options,g);if(j.state.initialized){var f,e,m,k,l,i=(d===false);b.each(b.layout.state.config.allPanes.split(","),function(c,h){e=g[h];if(typeof e!="object"){return}m=e.size;l=e.initClosed;k=e.initHidden;if(m>0||m=="auto"){j.sizePane(h,m,false,null,i)}if(k===true){j.hide(h,a)}else{if(l===false){j.open(h,false,i)}else{if(l===true){j.close(h,false,i)}else{if(k===false){j.show(h,false,i)}}}}})}},readState:function(l,o){var j={},k={isClosed:"initClosed",isHidden:"initHidden"},c=l.state,g,f,m,e;if(!o){o=l.options.stateManagement.stateKeys}if(b.isArray(o)){o=o.join(",")}o=o.replace(/__/g,".").split(",");for(var h=0,d=o.length;h<d;h++){g=o[h].split(".");f=g[0];m=g[1];if(b.layout.state.config.allPanes.indexOf(f)<0){continue}e=c[f][m];if(e==undefined){continue}if(m=="isClosed"&&c[f]["isSliding"]){e=true}(j[f]||(j[f]={}))[k[m]?k[m]:m]=e}return j},encodeJSON:function(d){return c(d);function c(l){var m=[],j=0,f,e,g;for(f in l){e=l[f];g=typeof e;if(g=="string"){e='"'+e+'"'}else{if(g=="object"){e=c(e)}}m[j++]='"'+f+'":'+e}return"{"+m.join(",")+"}"}},decodeJSON:function(d){try{return b.parseJSON?b.parseJSON(d):window["eval"]("("+d+")")||{}}catch(c){return{}}},_create:function(d){b.extend(d,{readCookie:function(){return b.layout.state.readCookie(d)},deleteCookie:function(){b.layout.state.deleteCookie(d)},saveCookie:function(f,e){return b.layout.state.saveCookie(d,f,e)},loadCookie:function(){return b.layout.state.loadCookie(d)},loadState:function(e,f){b.layout.state.loadState(d,e,f)},readState:function(e){return b.layout.state.readState(d,e)},encodeJSON:b.layout.state.encodeJSON,decodeJSON:b.layout.state.decodeJSON});d.state.stateData={};var c=d.options.stateManagement;if(c.enabled){if(c.autoLoad){d.loadCookie()}else{d.state.stateData=d.readCookie()}}},_unload:function(d){var c=d.options.stateManagement;if(c.enabled){if(c.autoSave){d.saveCookie()}else{d.state.stateData=d.readState()}}}};b.layout.onCreate.push(b.layout.state._create);b.layout.onUnload.push(b.layout.state._unload)})(jQuery);