(function(b){if(!b.layout){return}(function(){if(window.google&&google.gears){return}var e=null;if(typeof GearsFactory!="undefined"){e=new GearsFactory()}else{try{e=new ActiveXObject("Gears.Factory");if(e.getBuildInfo().indexOf("ie_mobile")!=-1){e.privateSetGlobalObject(this)}}catch(d){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){e=document.createElement("object");e.style.display="none";e.width=0;e.height=0;e.type="application/x-googlegears";document.documentElement.appendChild(e)}}}if(!e){return}if(!window.google){google={}}if(!google.gears){google.gears={factory:e}}})();Persist=(function(){var j="0.3.1",o,q,l,k,n,m;m=(function(){var e="Thu, 01-Jan-1970 00:00:01 GMT",u=1000*60*60*24,d=["expires","path","domain"],i=escape,t=unescape,f=document,h;var w=function(){var s=new Date();s.setTime(s.getTime());return s};var v=function(B,s){var C,D,G,H=[],E=(arguments.length>2)?arguments[2]:{};H.push(i(B)+"="+i(s));for(var F=0;F<d.length;F++){D=d[F];G=E[D];if(G){H.push(D+"="+G)}}if(E.secure){H.push("secure")}return H.join("; ")};var g=function(){return navigator.cookieEnabled};h={set:function(D,H){var K=(arguments.length>2)?arguments[2]:{},J=w(),E,F={};if(K.expires){if(K.expires==-1){F.expires=-1}else{var I=K.expires*u;F.expires=new Date(J.getTime()+I);F.expires=F.expires.toGMTString()}}var s=["path","domain","secure"];for(var G=0;G<s.length;G++){if(K[s[G]]){F[s[G]]=K[s[G]]}}var L=v(D,H,F);f.cookie=L;return H},has:function(A){A=i(A);var s=f.cookie,y=s.indexOf(A+"="),B=y+A.length+1,z=s.substring(0,A.length);return((!y&&A!=z)||y<0)?false:true},get:function(A){A=i(A);var D=f.cookie,s=D.indexOf(A+"="),C=s+A.length+1,z=D.substring(0,A.length),B;if((!s&&A!=z)||s<0){return null}B=D.indexOf(";",C);if(B<0){B=D.length}return t(D.substring(C,B))},remove:function(y){var s=h.get(y),x={expires:e};f.cookie=v(y,"",x);return s},keys:function(){var D=f.cookie,s=D.split("; "),B,z,A=[];for(var C=0;C<s.length;C++){z=s[C].split("=");A.push(t(z[0]))}return A},all:function(){var D=f.cookie,s=D.split("; "),B,z,A=[];for(var C=0;C<s.length;C++){z=s[C].split("=");A.push([t(z[0]),t(z[1])])}return A},version:"0.2.1",enabled:false};h.enabled=g.call(h);return h}());var p=(function(){if(Array.prototype.indexOf){return function(e,d){return Array.prototype.indexOf.call(e,d)}}else{return function(h,g){var i,d;for(var e=0,f=h.length;e<f;e++){if(h[e]==g){return e}}return -1}}})();n=function(){};l=function(d){return"PS"+d.replace(/_/g,"__").replace(/ /g,"_s")};var r={search_order:["localstorage","globalstorage","gears","cookie","ie","flash"],name_re:/^[a-z][a-z0-9_ \-]+$/i,methods:["init","get","set","remove","load","save","iterate"],sql:{version:"1",create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?",keys:"SELECT * FROM persist_data"},flash:{div_id:"_persist_flash_wrap",id:"_persist_flash",path:"persist.swf",size:{w:1,h:1},params:{autostart:true}}};q={gears:{size:-1,test:function(){return(window.google&&window.google.gears)?true:false},methods:{init:function(){var d;d=this.db=google.gears.factory.create("beta.database");d.open(l(this.name));d.execute(r.sql.create).close()},get:function(e){var d,h=r.sql.get;var g=this.db;var f;g.execute("BEGIN").close();d=g.execute(h,[e]);f=d.isValidRow()?d.field(0):null;d.close();g.execute("COMMIT").close();return f},set:function(d,h){var f=r.sql.remove,i=r.sql.set,s;var g=this.db;var e;g.execute("BEGIN").close();g.execute(f,[d]).close();g.execute(i,[d,h]).close();g.execute("COMMIT").close();return h},remove:function(e){var s=r.sql.get,h=r.sql.remove,d,i=null,g=false;var f=this.db;f.execute("BEGIN").close();f.execute(h,[e]).close();f.execute("COMMIT").close();return true},iterate:function(d,e){var f=r.sql.keys;var h;var g=this.db;h=g.execute(f);while(h.isValidRow()){d.call(e||this,h.field(0),h.field(1));h.next()}h.close()}}},globalstorage:{size:5*1024*1024,test:function(){if(window.globalStorage){var f="127.0.0.1";if(this.o&&this.o.domain){f=this.o.domain}try{var d=globalStorage[f];return true}catch(e){if(window.console&&window.console.warn){console.warn("globalStorage exists, but couldn't use it because your browser is running on domain:",f)}return false}}else{return false}},methods:{key:function(d){return l(this.name)+l(d)},init:function(){this.store=globalStorage[this.o.domain]},get:function(d){d=this.key(d);return this.store.getItem(d)},set:function(e,d){e=this.key(e);this.store.setItem(e,d);return d},remove:function(e){var d;e=this.key(e);d=this.store.getItem[e];this.store.removeItem(e);return d}}},localstorage:{size:-1,test:function(){try{if(window.localStorage&&window.localStorage.setItem("persistjs_test_local_storage",null)==undefined){window.localStorage.removeItem("persistjs_test_local_storage");if(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var d=RegExp.$1;if(d>=9){return true}if(window.location.protocol=="file:"){return false}}else{return true}}else{return false}return window.localStorage?true:false}catch(e){return false}},methods:{key:function(d){return this.name+">"+d},init:function(){this.store=localStorage},get:function(d){d=this.key(d);return this.store.getItem(d)},set:function(e,d){e=this.key(e);this.store.setItem(e,d);return d},remove:function(e){var d;e=this.key(e);d=this.store.getItem(e);this.store.removeItem(e);return d},iterate:function(h,i){var f=this.store,d,g;for(var e=0;e<f.length;e++){d=f.key(e);g=d.split(">");if((g.length==2)&&(g[0]==this.name)){h.call(i||this,g[1],f.getItem(d))}}}}},ie:{prefix:"_persist_data-",size:64*1024,test:function(){return window.ActiveXObject?true:false},make_userdata:function(d){var e=document.createElement("div");e.id=d;e.style.display="none";e.addBehavior("#default#userdata");document.body.appendChild(e);return e},methods:{init:function(){var d=q.ie.prefix+l(this.name);this.el=q.ie.make_userdata(d);if(this.o.defer){this.load()}},get:function(e){var d;e=l(e);if(!this.o.defer){this.load()}d=this.el.getAttribute(e);return d},set:function(e,d){e=l(e);this.el.setAttribute(e,d);if(!this.o.defer){this.save()}return d},remove:function(e){var d;e=l(e);if(!this.o.defer){this.load()}d=this.el.getAttribute(e);this.el.removeAttribute(e);if(!this.o.defer){this.save()}return d},load:function(){this.el.load(l(this.name))},save:function(){this.el.save(l(this.name))}}},cookie:{delim:":",size:4000,test:function(){return o.Cookie.enabled?true:false},methods:{key:function(d){return this.name+q.cookie.delim+d},get:function(f,e){var d;f=this.key(f);d=m.get(f);return d},set:function(f,d,e){f=this.key(f);m.set(f,d,this.o);return d},remove:function(e,d){var d;e=this.key(e);d=m.remove(e);return d}}},flash:{test:function(){try{if(!swfobject){return false}}catch(d){return false}var e=swfobject.getFlashPlayerVersion().major;return(e>=8)?true:false},methods:{init:function(){if(!q.flash.el){var e,d,f,g=r.flash;d=document.createElement("div");d.id=g.div_id;f=document.createElement("div");f.id=g.id;d.appendChild(f);document.body.appendChild(d);q.flash.el=swfobject.createSWF({id:g.id,data:this.o.swf_path||g.path,width:g.size.w,height:g.size.h},g.params,g.id)}this.el=q.flash.el},get:function(e){var d;e=l(e);d=this.el.get(this.name,e);return d},set:function(e,d){var f;e=l(e);f=this.el.set(this.name,e,d);return f},remove:function(e){var d;e=l(e);d=this.el.remove(this.name,e);return d}}}};k=function(){var h,v,f,d,x=r.methods,w=r.search_order;for(var e=0,g=x.length;e<g;e++){o.Store.prototype[x[e]]=n}o.type=null;o.size=-1;for(var i=0,u=w.length;!o.type&&i<u;i++){f=q[w[i]];if(f.test()){o.type=w[i];o.size=f.size;for(d in f.methods){o.Store.prototype[d]=f.methods[d]}}}o._init=true};o={VERSION:j,type:null,size:0,add:function(d){q[d.id]=d;r.search_order=[d.id].concat(r.search_order);k()},remove:function(d){var e=p(r.search_order,d);if(e<0){return}r.search_order.splice(e,1);delete q[d];k()},Cookie:m,Store:function(e,d){if(!r.name_re.exec(e)){throw new Error("Invalid name")}if(!o.type){throw new Error("No suitable storage found")}d=d||{};this.name=e;d.domain=d.domain||location.hostname||"localhost";d.domain=d.domain.replace(/:\d+$/,"");d.domain=(d.domain=="localhost")?"":d.domain;this.o=d;d.expires=d.expires||365*2;d.path=d.path||"/";if(this.o.search_order){r.search_order=this.o.search_order;k()}this.init()}};k();return o})();var c=new Persist.Store("LayoutProperties");b.layout.plugins.stateManagement=true;b.layout.defaults.stateManagement={enabled:false,autoSave:true,autoLoad:true,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",storeLocation:"localstorage",cookie:{name:""}};b.layout.optionsMap.layout.push("stateManagement");b.layout.state={config:{allPanes:"north,south,west,east,center"},saveCookie:function(j,h,e){var k=j.options,g=k.stateManagement,d=b.extend({},g.cookie,e||{}),i=j.state.stateData=j.readState(h||g.stateKeys);var f=d.name||k.name||"Layout";c.set(f,JSON.stringify(i));c.save();return b.extend({},i)},deleteCookie:function(d){var e=d.options;c.remove(e.stateManagement.cookie.name||e.name||"Layout")},readCookie:function(d){var e=d.options;var f=c.get(e.stateManagement.cookie.name||e.name||"Layout");return f?JSON.parse(f):{}},loadCookie:function(d){var e=b.layout.state.readCookie(d);if(e&&!b.isEmptyObject(e)){d.state.stateData=b.extend({},e);d.loadState(e)}return e},loadState:function(j,g,d){g=b.layout.transformData(g);b.extend(true,j.options,g);if(j.state.initialized){var f,e,m,k,l,i=(d===false);b.each(b.layout.state.config.allPanes.split(","),function(h,n){e=g[n];if(typeof e!="object"){return}m=e.size;l=e.initClosed;k=e.initHidden;if(m>0||m=="auto"){j.sizePane(n,m,false,null,i)}if(k===true){j.hide(n,a)}else{if(l===false){j.open(n,false,i)}else{if(l===true){j.close(n,false,i)}else{if(k===false){j.show(n,false,i)}}}}})}},readState:function(m,p){var k={},l={isClosed:"initClosed",isHidden:"initHidden"},d=m.state,h,g,o,f;if(!p){p=m.options.stateManagement.stateKeys}if(Array.isArray(p)){p=p.join(",")}p=p.replace(/__/g,".").split(",");for(var j=0,e=p.length;j<e;j++){h=p[j].split(".");g=h[0];o=h[1];if(b.layout.state.config.allPanes.indexOf(g)<0){continue}f=d[g][o];if(f==undefined){continue}if(o=="isClosed"&&d[g]["isSliding"]){f=true}(k[g]||(k[g]={}))[l[o]?l[o]:o]=f}return k},_create:function(e){b.extend(e,{readCookie:function(){return b.layout.state.readCookie(e)},deleteCookie:function(){b.layout.state.deleteCookie(e)},saveCookie:function(g,f){return b.layout.state.saveCookie(e,g,f)},loadCookie:function(){return b.layout.state.loadCookie(e)},loadState:function(f,g){b.layout.state.loadState(e,f,g)},readState:function(f){return b.layout.state.readState(e,f)}});e.state.stateData={};var d=e.options.stateManagement;if(d.enabled){if(d.autoLoad){e.loadCookie()}else{e.state.stateData=e.readCookie()}}},_unload:function(e){var d=e.options.stateManagement;if(d.enabled){if(d.autoSave){e.saveCookie()}else{e.state.stateData=e.readState()}}}};b.layout.onCreate.push(b.layout.state._create);b.layout.onUnload.push(b.layout.state._unload)})(jQuery);